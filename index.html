    <!DOCTYPE html>
    <html lang="de">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ekaterina Shangina - K√ºnstlerin und Kunstlehrerin</title>
        <style>
            /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
            :root {
                --primary-white: #FFFFFF;
                --primary-black: #000000;
                --accent-gray: #F5F5F5;
                --text-gray: #333333;
            }
            
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: 'Helvetica Neue', Arial, sans-serif;
            }
            
            body {
                background-color: var(--primary-white);
                color: var(--primary-black);
                line-height: 1.6;
            }
            
            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 20px;
            }
            
            /* –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏—è */
            h1, h2, h3 {
                font-weight: 700;
                letter-spacing: -0.5px;
            }
            
            h1 {
                font-size: 4rem;
                margin-bottom: 1rem;
            }
            
            h2 {
                font-size: 2.5rem;
                margin-bottom: 2rem;
                position: relative;
            }
            
            h2::after {
                content: "";
                position: absolute;
                bottom: -10px;
                left: 0;
                width: 60px;
                height: 3px;
                background-color: var(--primary-black);
            }
            
            p {
                margin-bottom: 1.5rem;
                font-size: 1.1rem;
                color: var(--text-gray);
            }
            
            /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
            nav {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                background-color: var(--primary-white);
                padding: 1.5rem 0;
                z-index: 1000;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                transition: transform 0.3s ease; /* Add transition for smooth hide/show */
            }
            nav.hide-on-scroll {
                transform: translateY(-100%);
            }
            nav.show-on-scroll {
                transform: translateY(0);
            }
            
            nav .container {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            .logo {
                font-size: 1.5rem;
                font-weight: 700;
            }
            
            .nav-links {
                display: flex;
                list-style: none;
            }
            
            .nav-links li {
                margin-left: 2rem;
            }
            
            .nav-links a {
                text-decoration: none;
                color: var(--primary-black);
                font-weight: 500;
                transition: all 0.3s ease;
            }
            
            .nav-links a:hover {
                opacity: 0.7;
            }
            
            /* –°–µ–∫—Ü–∏–∏ */
            section {
                padding: 6rem 0;
                min-height: 100vh;
                display: flex;
                align-items: center;
            }
            
            /* –ì–ª–∞–≤–Ω–∞—è —Å–µ–∫—Ü–∏—è */
            .hero {
                text-align: center;
                position: relative;
            }
            
            .hero-content {
                max-width: 800px;
                margin: 0 auto;
            }
            
            .hero-subtitle {
                font-size: 1.2rem;
                margin-bottom: 2rem;
                opacity: 0.8;
            }
            
            /* –û–±–æ –º–Ω–µ */
            .about-content {
                display: grid;
                grid-template-columns: repeat(3, 1fr); /* —Ç—Ä–∏ —Ä–∞–≤–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ */
                gap: 2rem; /* –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –æ—Ç—Å—Ç—É–ø, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–æ */
                align-items: start; /* —á—Ç–æ–±—ã —ç–ª–µ–º–µ–Ω—Ç—ã –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–ª–∏—Å—å —Å–≤–µ—Ä—Ö—É */
            }
            
            /* –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã */
            .experience-item {
                margin-bottom: 3rem;
            }
            
            .experience-item h3 {
                font-size: 1.5rem;
                margin-bottom: 0.5rem;
            }
            
            .experience-date {
                font-style: italic;
                margin-bottom: 1rem;
                opacity: 0.7;
            }
            
            /* –ì–∞–ª–µ—Ä–µ—è */
            .gallery {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
                gap: 2rem;
                margin: 3rem auto;
                width: 100%;       /* allow it to fill screen */
                max-width: none;   /* remove any limiting max-width */
            }

            .gallery-item {
                position: relative;
                overflow: hidden;
                aspect-ratio: 1/1;
            }
            
            /* –û–±—â–∏–π —Å—Ç–∏–ª—å –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫ */
            img {
                max-width: 100%;
                height: auto;
                display: block;
                border-radius: 8px;          /* —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
                box-shadow: 0 4px 12px rgba(0,0,0,0.1); /* –º—è–≥–∫–∞—è —Ç–µ–Ω—å */
                margin: 0 auto;              /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            }

            /* –ì–∞–ª–µ—Ä–µ—è —Ä–∞–±–æ—Ç */
            .gallery-item img {
                width: 100%;      /* Responsive width */
                height: auto;
                display: block;
                margin: 0 auto;
                object-fit: cover;
            }

            .gallery-item:hover img {
                transform: scale(1.05);
            }
            
            .gallery-caption {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                padding: 1rem;
                background: rgba(0, 0, 0, 0.7);
                color: var(--primary-white);
                transform: translateY(100%);
                transition: transform 0.3s ease;
                cursor: pointer;
            }

            .gallery-caption > p {
                color: var(--primary-white);
            }        
            .gallery-item:hover .gallery-caption {
                transform: translateY(0);
            }
            
            
            /* –í—ã—Å—Ç–∞–≤–∫–∏ */
            .exhibitions-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 2rem;
            }
            
            .exhibition-item {
                padding: 2rem;
                background-color: var(--accent-gray);
            }
            
            /* –£—á–µ–Ω–∏–∫–∏ */
            .students-gallery {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
                gap: 1.5rem;  /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
                justify-items: center; /* —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤ —è—á–µ–π–∫–µ */
            }

            .students-gallery img {
                max-width: 100%;
                height: auto;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            }
            
            
            /* –ü—Ä–æ–µ–∫—Ç—ã */
            .projects-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 2rem;
            }
            
            .project-item {
                margin-bottom: 2rem;
            }
            
            /* –ö–æ–Ω—Ç–∞–∫—Ç—ã */
            .contact-info {
                margin-top: 2rem;
            }
            
            .contact-item {
                display: flex;
                align-items: center;
                margin-bottom: 1.5rem;
            }
            
            .contact-icon {
                margin-right: 1rem;
                font-size: 1.5rem;
            }
            
            /* –§—É—Ç–µ—Ä */
            footer {
                padding: 3rem 0;
                text-align: center;
                background-color: var(--primary-black);
                color: var(--primary-white);
            }
            
            /* –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
            .experimental-element {
                position: absolute;
                width: 100px;
                height: 100px;
                border: 2px solid var(--primary-black);
                opacity: 0.1;
                z-index: -1;
            }
            
            .mobile-menu-toggle {
                display: none; /* —Å–∫—Ä—ã—Ç–∞ –Ω–∞ –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
                font-size: 2rem;
                cursor: pointer;
            }

            /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
            @media (max-width: 768px) {
                h1 {
                    font-size: 3rem;
                }
                
                h2 {
                    font-size: 2rem;
                }
                
                .about-content {
                    grid-template-columns: 1fr;
                    gap: 2rem;
                }
                
                .nav-links {
                    display: none;
                }

                .nav-links {
                    display: none; /* —Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
                    flex-direction: column;
                    background-color: var(--primary-white);
                    position: absolute;
                    top: 70px;
                    left: 0;
                    width: 100%;
                    padding: 1rem 0;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                }

                .nav-links li {
                    margin: 1rem 0;
                    text-align: center;
                }

                .mobile-menu-toggle {
                    display: block; /* –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
                }

                .nav-links.active {
                    display: flex;
                }
            }

            /* Lightbox overlay */
            .lightbox {
                display: none;
                position: fixed;
                z-index: 999;
                top: 0; 
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                justify-content: center;
                align-items: center;
                overflow: hidden;
                flex-direction: column; /* Added to stack elements vertically */
            }

            .lightbox-content {
                display: flex;
                flex-direction: column;
                align-items: center;
                max-width: 90%;
                max-height: 90%;
            }

            .lightbox img.lightbox-img {
                max-width: 100%;
                max-height: 80vh;
                margin: auto;
                display: block;
            }

            .lightbox-caption {
                color: #fff;
                text-align: center;
                margin-top: 1rem;
                font-size: 1.2rem;
                width: 100%; /* Ensure caption spans full width */
            }

            .lightbox .close {
                position: absolute;
                top: 20px;
                right: 30px;
                color: #fff;
                font-size: 40px;
                cursor: pointer;
            }

            .lightbox button.prev,
            .lightbox button.next {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                background: none;
                border: none;
                color: #fff;
                font-size: 50px;
                cursor: pointer;
                padding: 0 20px;
                user-select: none;
            }

            .lightbox button.prev { left: 0; }
            .lightbox button.next { right: 0; } 

            .show-more-btn {
                flex: 0 0 auto;
                min-width: 200px;
                aspect-ratio: 1 / 1;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.2rem;
                font-weight: bold;
                background: linear-gradient(135deg, #444, #222);
                color: white;
                border: 2px solid #666;
                border-radius: 12px;
                cursor: pointer;
                transition: all 0.3s ease;
                text-transform: uppercase;
                letter-spacing: 1px;
            }

            .show-more-btn:hover {
                background: linear-gradient(135deg, #666, #333);
                transform: scale(1.05);
                border-color: #aaa;
            }
        </style>
    </head>
    <body>
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav>
            <div class="container">
                <div class="logo">EKATERINA SHANGINA</div>
                <div class="mobile-menu-toggle">‚ò∞</div>
                <ul class="nav-links">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">√úber mich</a></li>
                    <li><a href="#experience">Erfahrung</a></li>
                    <li><a href="#works">Arbeiten</a></li>
                    <li><a href="#exhibitions">Ausstellungen</a></li>
                    <li><a href="#students">Sch√ºler</a></li>
                    <li><a href="#projects">Projekte</a></li>
                    <li><a href="#contact">Kontakt</a></li>
                </ul>
            </div>
        </nav>

        <div id="lightbox" class="lightbox">
            <span class="close">&times;</span>
            <div class="lightbox-content">
                <img class="lightbox-img" src="" alt="">
                <div class="lightbox-caption"></div>
            </div>
            <button class="prev">&#10094;</button>
            <button class="next">&#10095;</button>
        </div>
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å–µ–∫—Ü–∏—è -->
        <section id="home" class="hero">
            <div class="container hero-content">
                <h1>PORTFOLIO</h1>
                <p class="hero-subtitle">K√ºnstlerin, Kunstlehrerin.</p>
                <h2>Ekaterina Shangina</h2>
            </div>
            <div class="experimental-element" style="top: 20%; left: 5%; transform: rotate(45deg);"></div>
            <div class="experimental-element" style="bottom: 30%; right: 10%; transform: rotate(20deg);"></div>
        </section>

        <!-- –û–±–æ –º–Ω–µ -->
        <section id="about">
            <div class="container">
                <h2>EIN WENIG √úBER MICH</h2>
                <div class="about-content">
                    <div>
                        <img src="images/main.jpg" alt="Ekaterina Shangina" style="max-width: 300px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-top: 2rem;">
                    </div>
                    <div>
                        <p>Mein Lieblingsmotto lautet ‚ÄûWenn du nicht weiterwei√üt ‚Äî zeichne!‚Äú Genau das hat mir geholfen und hilft mir bis heute, mit Schwierigkeiten umzugehen.</p>
                        <p>Ich habe eine kreative Ausbildung, wenn auch keine klassische Kunstausbildung. Wenn man aber zusammenz√§hlt, wie viele verschiedene Kunstkurse ich besucht habe, w√§re es wahrscheinlich falsch zu sagen, dass ich nichts gelernt habe.</p>
                    </div>
                    <div>
                        <p>Au√üerdem verbessere ich kontinuierlich meine p√§dagogischen F√§higkeiten auf verschiedenen Kursen und Seminaren.</p>
                        <p>Seit 2018 nehme ich j√§hrlich an der Nacht der Kunst Leipzig und an Wohlt√§tigkeitsveranstaltungen teil; ein Gro√üteil meiner Bilder befindet sich in Privatsammlungen. Ich male mit Acryl, Aquarell, Gouache und grafischen Materialien. Ich praktiziere Pleinair-Malen und Skizzieren nach der Natur.</p>
                        <p>Meine Leidenschaft f√ºr die Arbeit mit jungen Menschen habe ich seit 2019 als ehrenamtliche Lehrerin beim Jugendverein IUVENTUS entdeckt und vertieft. Da mir diese T√§tigkeit so viel Freude bereitete, entschloss ich mich 2024, meine k√ºnstlerische Expertise und meine p√§dagogische Begeisterung zum Beruf zu machen und mich als selbstst√§ndige K√ºnstlerin und Kunstlehrerin zu registrieren. Seither unterrichte ich mit gro√üer Freude eigene private Gruppen sowie Online-Kurse.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- –û–ø—ã—Ç -->
        <section id="experience" style="background-color: #F5F5F5;">
            <div class="container">
                <h2>ERFAHRUNG</h2>
                <div class="experience-item">
                    <h3>Kunstlehrerin im Jugendclub IUWENTUS</h3>
                    <p class="experience-date">2021 ‚Äì heute</p>
                </div>
                <div class="experience-item">
                    <h3>Selbstst√§ndigkeit</h3>
                    <p class="experience-date">2024 ‚Äì heute</p>
                    <p>Kunstlehrerin f√ºr Kinder ab 5 Jahren und Jugendliche. Organisatorin von Workshops und Au√üenseminaren. Online-Zeichenunterricht.</p>
                </div>
            </div>
        </section>

        <!-- –†–∞–±–æ—Ç—ã -->
        <section id="works">
            <div class="container">
                <h2>AUSGEW√ÑHLTE ARBEITEN</h2>
                <div folder="my-works" class="gallery"></div>
            </div>
        </section>

        <!-- –í—ã—Å—Ç–∞–≤–∫–∏ -->
        <section id="exhibitions" style="background-color: #F5F5F5;">
            <div class="container">
                <h2>AUSSTELLUNGEN UND VERANSTALTUNGEN</h2>
                <div class="exhibitions-grid">
                    <div class="exhibition-item">
                        <h3>Nacht der Kunst, Leipzig 2024</h3>
                        <p>Die Ausstellung fand in einer alten katholischen Kirche in Deutschland statt (ich nehme seit 2019 jedes Jahr teil).</p>
                    </div>
                    <div class="exhibition-item">
                        <h3>Wohlt√§tigkeitsausstellung ‚ÄûVon Herz zu Herz‚Äú 2025</h3>
                        <p>Ein Teil des Verkaufserl√∂ses der Bilder wird zur Unterst√ºtzung krebskranker Kinder gespendet. Ich nehme seit 2018 j√§hrlich teil.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- –£—á–µ–Ω–∏–∫–∏ -->
        <section id="students">
            <div class="container">
                <h2>MEINE SCH√úLER</h2>
                <div class="gallery" folder="students"></div>
            </div>
        </section>

        <!-- –ü—Ä–æ–µ–∫—Ç—ã -->
        <section id="projects" style="background-color: #F5F5F5;">
            <div class="container">
                <h2>ANDERE PROJEKTE</h2>
                <div folder="projects" show-caption class="gallery"></div>
                
                <h3 style="margin-top: 3rem;">ARBEITEN DER SCH√úLER IM RAHMEN VERSCHIEDENER WORKSHOPS UND MEISTERKLASSEN</h3>
                <div folder="student-works" class="gallery"></div>
                <h3 style="margin-top: 3rem;">ONLINEUNTERRICHTE</h3>
                <div folder="online-lessons" class="gallery"></div>
        </section>

        <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
        <section id="contact">
            <div class="container">
                <h2>KONTAKT</h2>
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">üìß</div>
                        <div>shanginaes@gmail.com</div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">üì∑</div>
                        <div>@Katjashangina</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- –§—É—Ç–µ—Ä -->
        <footer>
            <div class="container">
                <p>¬© 2024 Ekaterina Shangina. Alle Rechte vorbehalten.</p>
            </div>
        </footer>

        <script>
            // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            document.querySelectorAll('nav a').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    const targetId = this.getAttribute('href');
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Å—ã–ª–∫–∞ —è–∫–æ—Ä–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                    if (targetId.startsWith('#')) {
                        e.preventDefault();
                        const targetElement = document.querySelector(targetId);
                        
                        if (targetElement) {
                            const offsetTop = targetElement.offsetTop - 80; // –£—á–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞–≤–±–∞—Ä–∞
                            
                            window.scrollTo({
                                top: offsetTop,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });

            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = 1;
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ —Å–µ–∫—Ü–∏—è–º–∏
            document.querySelectorAll('section').forEach(section => {
                section.style.opacity = 0;
                section.style.transform = 'translateY(20px)';
                section.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                observer.observe(section);
            });

            // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
            const toggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');

            if (toggle && navLinks) {
                toggle.addEventListener('click', () => {
                    navLinks.classList.toggle('active');
                    toggle.setAttribute('aria-expanded', 
                        navLinks.classList.contains('active').toString()
                    );
                });

                // Close mobile menu on menu item click
                document.querySelectorAll('.nav-links a').forEach(link => {
                    link.addEventListener('click', () => {
                        if (window.innerWidth <= 768) {
                            navLinks.classList.remove('active');
                            toggle.setAttribute('aria-expanded', 'false');
                        }
                    });
                });
            }

            // Hide/show nav on scroll direction
            let lastScrollTop = 0;
            const nav = document.querySelector('nav');
            let scrollTimeout;

            if (nav) {
                window.addEventListener('scroll', function() {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    
                    // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–∞—É—Ç
                    clearTimeout(scrollTimeout);
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–≤–±–∞—Ä –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ –≤–≤–µ—Ä—Ö
                    if (scrollTop > lastScrollTop && scrollTop > 100) {
                        // Scrolling down
                        nav.classList.remove('show-on-scroll');
                        nav.classList.add('hide-on-scroll');
                    } else {
                        // Scrolling up
                        nav.classList.remove('hide-on-scroll');
                        nav.classList.add('show-on-scroll');
                    }
                    
                    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º –Ω–∞–≤–±–∞—Ä –ø–æ—Å–ª–µ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏—è —Å–∫—Ä–æ–ª–ª–∞
                    scrollTimeout = setTimeout(() => {
                        nav.classList.remove('show-on-scroll');
                        nav.classList.add('hide-on-scroll');
                    }, 2000);
                }, false);

                // Initialize nav as visible
                nav.classList.add('show-on-scroll');
            }

            // –£—Ç–∏–ª–∏—Ç—ã
            function shuffleArray(array) {
                const newArray = [...array];
                for (let i = newArray.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                }
                return newArray;
            }

            // Lightbox functionality
            let currentGallery = [];
            let currentIndex = 0;

            const lightbox = document.getElementById("lightbox");
            const lightboxImg = lightbox?.querySelector(".lightbox-img");
            const captionDivLightbox = lightbox?.querySelector(".lightbox-caption");
            const closeBtn = lightbox?.querySelector(".close");
            const prevBtn = lightbox?.querySelector(".prev");
            const nextBtn = lightbox?.querySelector(".next");

            if (lightbox && lightboxImg && closeBtn && prevBtn && nextBtn) {
                function openLightbox(index, gallery) {
                    currentGallery = gallery;
                    currentIndex = index;
                    updateLightbox();
                    lightbox.style.display = "flex";
                    lightbox.setAttribute('aria-hidden', 'false');
                    document.body.style.overflow = "hidden";
                    
                    // –§–æ–∫—É—Å –¥–ª—è accessibility
                    closeBtn.focus();
                }

                function updateLightbox() {
                    if (currentGallery[currentIndex]) {
                        const item = currentGallery[currentIndex];
                        lightboxImg.src = item.src;
                        lightboxImg.alt = item.caption || 'Gallery image';
                        if (captionDivLightbox) {
                            captionDivLightbox.textContent = item.caption;
                        }
                    }
                }

                function closeLightbox() {
                    lightbox.style.display = "none";
                    lightbox.setAttribute('aria-hidden', 'true');
                    document.body.style.overflow = "";
                }

                function prevImage() {
                    currentIndex = (currentIndex - 1 + currentGallery.length) % currentGallery.length;
                    updateLightbox();
                }

                function nextImage() {
                    currentIndex = (currentIndex + 1) % currentGallery.length;
                    updateLightbox();
                }

                closeBtn.addEventListener("click", closeLightbox);
                prevBtn.addEventListener("click", prevImage);
                nextBtn.addEventListener("click", nextImage);

                // Close lightbox when clicking outside the image
                lightbox.addEventListener("click", e => {
                    if (e.target === lightbox) closeLightbox();
                });

                // Arrow keys
                document.addEventListener("keydown", e => {
                    if (lightbox.style.display !== "flex") return;
                    
                    switch(e.key) {
                        case "ArrowLeft":
                            prevImage();
                            break;
                        case "ArrowRight":
                            nextImage();
                            break;
                        case "Escape":
                            closeLightbox();
                            break;
                    }
                });
            }

            // Setup lightbox for galleries after they are loaded
            function setupLightboxForGalleries() {
                const galleries = document.querySelectorAll(".gallery");
                
                galleries.forEach(galleryDiv => {
                    const items = Array.from(galleryDiv.querySelectorAll(".gallery-item"));
                    const galleryData = items.map(item => {
                        const img = item.querySelector("img");
                        const captionDiv = item.querySelector(".gallery-caption h3");
                        return {
                            src: img?.src || '',
                            caption: captionDiv ? captionDiv.textContent.replace(/"/g, '') : ""
                        };
                    }).filter(item => item.src); // –§–∏–ª—å—Ç—Ä—É–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –±–µ–∑ src

                    items.forEach((item, index) => {
                        const clickableElement = item.querySelector(".gallery-caption") || item.querySelector("img");
                        
                        if (clickableElement) {
                            clickableElement.style.cursor = "pointer";
                            clickableElement.addEventListener("click", () => {
                                if (lightbox) {
                                    openLightbox(index, galleryData);
                                }
                            });
                            
                            // –î–æ–±–∞–≤–ª—è–µ–º keyboard accessibility
                            clickableElement.setAttribute('tabindex', '0');
                            clickableElement.addEventListener('keypress', (e) => {
                                if (e.key === 'Enter' || e.key === ' ') {
                                    e.preventDefault();
                                    if (lightbox) {
                                        openLightbox(index, galleryData);
                                    }
                                }
                            });
                        }
                    });
                });
            }

            async function loadGalleries() {
                const galleries = document.querySelectorAll(".gallery[folder]");

                for (const gallery of galleries) {
                    const folder = gallery.getAttribute("folder");
                    const showCaption = gallery.hasAttribute("show-caption");
                    const jsonPath = `/images/${folder}/index.json`;

                    try {
                        const response = await fetch(jsonPath);
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        let files = await response.json();

                        // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
                        if (!Array.isArray(files)) {
                            throw new Error('Invalid JSON format: expected array');
                        }

                        // Shuffle images
                        files = shuffleArray(files);

                        // –û—á–∏—â–∞–µ–º –≥–∞–ª–µ—Ä–µ—é –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                        gallery.innerHTML = '';

                        // Add all items
                        files.forEach((file, index) => {
                            if (typeof file !== 'string') return; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                            
                            const name = file.replace(/\.[^/.]+$/, "");
                            let [caption, description] = name.split(" - ");
                            caption = caption || "Untitled";
                            description = description || "";

                            const item = document.createElement("div");
                            item.className = "gallery-item";

                            item.innerHTML = `
                                <img src="/images/${folder}/${file}" alt="${caption}" loading="lazy">
                                ${showCaption ? `
                                <div class="gallery-caption">
                                    <h3>${caption}</h3>
                                    <p>${description}</p>
                                </div>` : ''}
                            `;

                            gallery.appendChild(item);
                        });

                        // Limit visible to 5 (rest scrollable)
                        const items = gallery.querySelectorAll(".gallery-item");
                        let visibleCount = 5;

                        if (items.length > visibleCount) {
                            items.forEach((item, idx) => {
                                if (idx >= visibleCount) item.style.display = "none";
                            });

                            // "Show more" button
                            const showMore = document.createElement("button");
                            showMore.className = "show-more-btn";
                            showMore.textContent = `+ Show more (${items.length - visibleCount} remaining)`;
                            showMore.setAttribute('aria-label', `Show ${items.length - visibleCount} more images`);

                            showMore.onclick = () => {
                                const nextCount = Math.min(visibleCount + 5, items.length);
                                
                                for (let i = visibleCount; i < nextCount; i++) {
                                    items[i].style.display = "flex";
                                }
                                
                                visibleCount = nextCount;

                                if (visibleCount >= items.length) {
                                    showMore.remove();
                                } else {
                                    showMore.textContent = `+ Show more (${items.length - visibleCount} remaining)`;
                                }
                            };

                            gallery.appendChild(showMore);
                        }

                    } catch (err) {
                        console.error(`Error loading gallery ${folder}:`, err);
                        gallery.innerHTML = `<p class="error-message">Failed to load gallery: ${folder}. ${err.message}</p>`;
                    }
                }
                
                // Setup lightbox after galleries are loaded
                setupLightboxForGalleries();
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ DOM
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', loadGalleries);
            } else {
                loadGalleries();
            }

            // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            let ticking = false;

            function updateOnScroll() {
                // –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
                ticking = false;
            }

            window.addEventListener('scroll', function() {
                if (!ticking) {
                    requestAnimationFrame(updateOnScroll);
                    ticking = true;
                }
            });
        </script>
    </body>
    </html>